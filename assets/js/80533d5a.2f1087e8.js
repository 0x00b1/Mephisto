"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5121],{5110:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(9703);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=l(n),h=i,f=p["".concat(u,".").concat(h)]||p[h]||d[h]||a;return n?r.createElement(f,o(o({ref:t},c),{},{components:n})):r.createElement(f,o({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=p;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var l=2;l<a;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},6633:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(9703),i=n(7007),a=n(2532),o=n(3876),s=n(6859);const u=(0,r.createContext)({collectLink:()=>{}});var l=n(978),c=n(9234);const d=function(e){let{isNavLink:t,to:n,href:d,activeClassName:p,isActive:h,"data-noBrokenLinkCheck":f,autoAddBaseUrl:g=!0,...m}=e;var y;const{siteConfig:{trailingSlash:k,baseUrl:_}}=(0,a.Z)(),{withBaseUrl:w}=(0,l.C)(),b=(0,r.useContext)(u),v=n||d,O=(0,o.Z)(v),C=null==v?void 0:v.replace("pathname://","");let N=void 0!==C?(T=C,g&&(e=>e.startsWith("/"))(T)?w(T):T):void 0;var T;N&&O&&(N=(0,c.applyTrailingSlash)(N,{trailingSlash:k,baseUrl:_}));const q=(0,r.useRef)(!1),S=t?i.OL:i.rU,j=s.Z.canUseIntersectionObserver,x=(0,r.useRef)();(0,r.useEffect)((()=>(!j&&O&&null!=N&&window.docusaurus.prefetch(N),()=>{j&&x.current&&x.current.disconnect()})),[x,N,j,O]);const P=null!==(y=null==N?void 0:N.startsWith("#"))&&void 0!==y&&y,U=!N||!O||P;return N&&O&&!P&&!f&&b.collectLink(N),U?r.createElement("a",{href:N,...v&&!O&&{target:"_blank",rel:"noopener noreferrer"},...m}):r.createElement(S,{...m,onMouseEnter:()=>{q.current||null==N||(window.docusaurus.preload(N),q.current=!0)},innerRef:e=>{var t,n;j&&e&&O&&(t=e,n=()=>{null!=N&&window.docusaurus.prefetch(N)},x.current=new window.IntersectionObserver((e=>{e.forEach((e=>{t===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(x.current.unobserve(t),x.current.disconnect(),n())}))})),x.current.observe(t))},to:N||"",...t&&{isActive:h,activeClassName:p}})}},3876:(e,t,n)=>{function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function i(e){return void 0!==e&&!r(e)}n.d(t,{Z:()=>i,b:()=>r})},978:(e,t,n)=>{n.d(t,{C:()=>a,Z:()=>o});var r=n(2532),i=n(3876);function a(){const{siteConfig:{baseUrl:e="/",url:t}={}}=(0,r.Z)();return{withBaseUrl:(n,r)=>function(e,t,n,r){let{forcePrependBaseUrl:a=!1,absolute:o=!1}=void 0===r?{}:r;if(!n)return n;if(n.startsWith("#"))return n;if((0,i.b)(n))return n;if(a)return t+n;const s=n.startsWith(t)?n:t+n.replace(/^\//,"");return o?e+s:s}(t,e,n,r)}}function o(e,t){void 0===t&&(t={});const{withBaseUrl:n}=a();return n(e,t)}},7294:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{trailingSlash:n,baseUrl:r}=t;if(e.startsWith("#"))return e;if(void 0===n)return e;const[i]=e.split(/[#?]/),a="/"===i||i===r?i:(o=i,n?function(e){return e.endsWith("/")?e:e+"/"}(o):function(e){return e.endsWith("/")?e.slice(0,-1):e}(o));var o;return e.replace(i,a)}},9234:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.uniq=t.applyTrailingSlash=void 0;var i=n(7294);Object.defineProperty(t,"applyTrailingSlash",{enumerable:!0,get:function(){return r(i).default}});var a=n(325);Object.defineProperty(t,"uniq",{enumerable:!0,get:function(){return r(a).default}})},325:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Array.from(new Set(e))}},5831:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>u,toc:()=>l});var r=n(7086),i=(n(9703),n(5110)),a=n(6633);const o={sidebar_position:3},s="Check worker quality with Screening Units",u={unversionedId:"guides/how_to_use/worker_quality/using_screen_units",id:"guides/how_to_use/worker_quality/using_screen_units",isDocsHomePage:!1,title:"Check worker quality with Screening Units",description:"Screening units help filter out low-quality work, generally by hiding parts of the validation you're paying attention to behind the Mephisto server. To support this we provide the ScreenTaskRequired blueprint mixin.",source:"@site/docs/guides/how_to_use/worker_quality/using_screen_units.md",sourceDirName:"guides/how_to_use/worker_quality",slug:"/guides/how_to_use/worker_quality/using_screen_units",permalink:"/docs/guides/how_to_use/worker_quality/using_screen_units",editUrl:"https://github.com/facebookresearch/Mephisto/tree/main/docs/web/docs/guides/how_to_use/worker_quality/using_screen_units.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"guides",previous:{title:"Teach potential workers with Onboarding",permalink:"/docs/guides/how_to_use/worker_quality/using_onboarding"},next:{title:"Check against standards with Gold Labels",permalink:"/docs/guides/how_to_use/worker_quality/using_golds"}},l=[{value:"Basic configuration",id:"basic-configuration",children:[{value:"<code>screening_data_factory</code>",id:"screening_data_factory",children:[],level:3}],level:2},{value:"Additional Questions?",id:"additional-questions",children:[],level:2}],c={toc:l};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"check-worker-quality-with-screening-units"},"Check worker quality with Screening Units"),(0,i.kt)("p",null,"Screening units help filter out low-quality work, generally by hiding parts of the validation you're paying attention to behind the Mephisto server. To support this we provide the ",(0,i.kt)("inlineCode",{parentName:"p"},"ScreenTaskRequired")," blueprint mixin."),(0,i.kt)("p",null,"Screening units are a heuristic-based way to determine, on the first task completion, if a worker has understood the instructions of a task. They can be run either on real data you want annotated (for cases where your heuristics can be run whenever) or on specific 'test' data you believe it's easier to validate on."),(0,i.kt)("h2",{id:"basic-configuration"},"Basic configuration"),(0,i.kt)("p",null,"There are a few primary configuration parts for using screening units:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Hydra args",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"blueprint.passed_qualification_name"),": A string qualification to mark people who have passed screening. Those who fail will be assigned ",(0,i.kt)("inlineCode",{parentName:"li"},"blueprint.block_qualification"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"blueprint.use_screening_task"),": Set to ",(0,i.kt)("inlineCode",{parentName:"li"},"True")," to enable the feature."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"max_screening_units"),": An int for the maximum number of screening tasks you're willing to launch with this batch. Used to limit how much you will pay out for units that aren't annotating your desired data."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ScreenTaskSharedState"),":",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"screening_data_factory"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"False")," if you want to validate on real data. Otherwise, a factory that generates input data for a screening unit for a worker. Explained in-depth below.")))),(0,i.kt)("p",null,"With these set up, you'll also need to provide additional arguments to your ",(0,i.kt)("inlineCode",{parentName:"p"},"SharedTaskState")," to register the required qualifications and the gold validation function. For example, your run script main may look something like like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"...\n\ndef validate_screening_unit(unit: \"Unit\"):\n    agent = unit.get_assigned_agent()\n    data = agent.state.get_data()\n    return my_heuristic_validation(data['outputs'])\n\nshared_state = SharedTaskState(\n    ...\n    screening_data_factory=False\n    on_unit_submitted=ScreenTaskRequired.create_validation_function(cfg.mephisto, validate_gold_unit)\n)\nshared_state.qualifications += ScreenTaskRequired.get_mixin_qualifications(cfg.mephisto, shared_state)\n...\n")),(0,i.kt)("h3",{id:"screening_data_factory"},(0,i.kt)("inlineCode",{parentName:"h3"},"screening_data_factory")),(0,i.kt)("p",null,"The core functionality to provide to your ",(0,i.kt)("inlineCode",{parentName:"p"},"SharedTaskState")," to enable screening units to run on test data before moving to the real data you want annotated. If you want to validate using heuristics on your real data, you can set this to ",(0,i.kt)("inlineCode",{parentName:"p"},"False"),"."),(0,i.kt)("p",null,"These should take the form of a generator that returns an object of ",(0,i.kt)("inlineCode",{parentName:"p"},"Dict[str, Any]")," which will be used to populate the screening Unit's data. The most basic example would be:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"def my_screening_unit_generator():\n    while True:\n        yield {'task_data': 'some screening data', 'is_screen': True}\n")),(0,i.kt)("h2",{id:"additional-questions"},"Additional Questions?"),(0,i.kt)("p",null,"You can find more information on using screening units in the reference documentation for ",(0,i.kt)(a.Z,{target:null,to:"pathname:///python_api/mephisto/abstractions/blueprints/mixins/screen_task_required.html",mdxType:"Link"},(0,i.kt)("inlineCode",{parentName:"p"},"ScreenTaskRequired")),"."))}d.isMDXComponent=!0}}]);